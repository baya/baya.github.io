---
layout: post
title: 好玩的翻译
---

客户提出了一个需求: 希望在页面上直接编辑修改翻译内容。这是一个非常好的需求，因为页面上可以很直观地反映翻译(国际化)的效果，如果翻译内容不正确或者有缺失，客户则直接在
页面上修改或添加翻译内容, 这种修改效果是非常好的, 很有所见即所得的范儿。接下来我们站在客户的角度上去思考和实现这个需求。

## 需求分析

1. 无关的用户不能修改页面上的翻译内容，所以需要分配一个专门的用户去编辑翻译内容。

2. 在页面上为翻译内容添加一些特殊的标识来区分翻译内容和非翻译内容。

3. 需要给客户提供一个比较友好的 UI 来查看和编辑翻译内容。


## 初步设计

对于需求分析中的第 1 点，我们考虑增加一个叫 translator 即翻译者的角色，只有拥有这个角色的用户才能在页面上编辑翻译内容。

对于第 2 点，我们考虑重写 view 视图里的 helper 方法 `t`, 通过 `t` 方法在页面中插入翻译标识。

对于第 3 点，我们考虑以弹出框的形式在当前页面弹出一个 form 表单来编辑翻译内容。


心中有文字还不够，我们还要做到心中有图，为此我们还需要将设计以图的形式表现出来:

![t](/images/Snip20160403_40.png)


## 实现细节

有了设计图(blueprint), 我们可以根据上面的设计图来编写我们的实现细节:

